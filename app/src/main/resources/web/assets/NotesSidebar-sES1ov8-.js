import{_ as Q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-DwiGBbnu.js";import{_ as $}from"./TagFilter.vuevuetypescriptsetuptruelang-buDPquzL.js";import{_ as I}from"./trash-vFGyrkkp.js";import{_ as L}from"./layout-grid-Cw9O6hYY.js";import{d as M,e as R,s as z,f as E,M as P,r as f,N as V,w as D,az as O,ac as v,aA as j,O as x,o as l,v as G,P as g,Q as H,R as U,bP as F,a as t,j as u,A as y,T as S,c as T,h as k,t as r,k as i,D as J,C,E as K}from"./index-Cn6MD5BA.js";import"./VDropdownMenu-3_e6DEP-.js";const W={class:"nav"},X={class:"icon","aria-hidden":"true"},Y={class:"title"},Z={key:0,class:"count"},ee={class:"icon","aria-hidden":"true"},te={class:"title"},se={key:0,class:"count"},ue=M({__name:"NotesSidebar",setup(ae){const _=R(),{counter:s}=z(E()),{parseQ:b}=U(),a=P({tagIds:[]}),o=f(!1),n=f(""),{fetch:d}=V({handle:e=>{e&&(s.value.notes=e.total,s.value.notesTrash=e.trash)},document:F,variables:()=>({})});function p(){var c;const e=g.currentRoute.value,h=H(((c=e.query.q)==null?void 0:c.toString())??"");b(a,h),n.value=a.tagIds.length===1?a.tagIds[0]:"",o.value=a.trash??!1,o.value&&(n.value=""),d()}p(),D(()=>g.currentRoute.value,()=>{p()});function w(){const e=J([{name:"trash",op:"",value:"true"}]);C(_,`/notes?q=${K(e)}`)}function B(){C(_,"/notes")}const m=()=>{d()};return O(()=>{v.on("notes_actioned",m)}),j(()=>{v.off("notes_actioned",m)}),(e,h)=>{const c=L,N=I,q=$,A=Q;return l(),x(A,null,{body:G(()=>[t("ul",W,[t("li",{class:S({active:!n.value&&!o.value}),onClick:y(B,["prevent"])},[t("span",X,[u(c)]),t("span",Y,r(e.$t("all")),1),i(s).notes>=0?(l(),T("span",Z,r(i(s).notes.toLocaleString()),1)):k("",!0)],2),t("li",{class:S({active:o.value}),onClick:y(w,["prevent"])},[t("span",ee,[u(N)]),t("span",te,r(e.$t("trash")),1),i(s).notesTrash>=0?(l(),T("span",se,r(i(s).notesTrash.toLocaleString()),1)):k("",!0)],2)]),u(q,{type:"NOTE",selected:n.value},null,8,["selected"])]),_:1})}}});export{ue as default};
