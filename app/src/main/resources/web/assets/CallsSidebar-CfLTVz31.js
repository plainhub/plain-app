import{_ as I}from"./LeftSidebar.vuevuetypescriptsetuptruelang-DXZ1_5lW.js";import{_ as N}from"./TagFilter.vuevuetypescriptsetuptruelang-BQe4hXyG.js";import{m as f,c as a,o as s,a as n,d as D,e as E,s as P,f as U,M as j,r as h,N as F,w as G,az as O,ac as L,aA as W,O as m,v as J,P as w,Q as K,R as X,aB as Y,j as $,A as b,T as B,h as S,t as d,k as V,U as Z,W as ee,D as te,C as x,E as se}from"./index-Bsb9VlRU.js";import{_ as ne}from"./layout-grid-C34BGwLt.js";import"./VDropdownMenu-DdmjILN8.js";import"./more-vert-COB1t_KV.js";const oe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ae(p,t){return s(),a("svg",oe,t[0]||(t[0]=[n("path",{fill:"currentColor",d:"m12 17.425l-7-7V15H3V7h8v2H6.4l5.6 5.6L19.6 7L21 8.425z"},null,-1)]))}const le=f({name:"material-symbols-call-missed",render:ae}),ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ie(p,t){return s(),a("svg",ce,t[0]||(t[0]=[n("path",{fill:"currentColor",d:"M5.4 20L4 18.6L15.6 7H9V5h10v10h-2V8.4z"},null,-1)]))}const re=f({name:"material-symbols-call-made",render:ie}),ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _e(p,t){return s(),a("svg",ue,t[0]||(t[0]=[n("path",{fill:"currentColor",d:"M5 19V9h2v6.6L18.6 4L20 5.4L8.4 17H15v2z"},null,-1)]))}const me=f({name:"material-symbols-call-received",render:_e}),de={class:"nav"},pe={class:"icon","aria-hidden":"true"},ve={class:"title"},he={key:0,class:"count"},fe=["onClick"],ye={class:"icon","aria-hidden":"true"},ge={class:"title"},Ce={key:0,class:"count"},Ve=D({__name:"CallsSidebar",setup(p){const t=E(),{counter:v}=P(U()),{parseQ:M}=X(),l=j({tagIds:[]}),c=h(""),i=h(""),r=h(new Map),{fetch:y}=F({handle:e=>{e&&(v.value.calls=e.total,r.value.set("1",e.incoming),r.value.set("2",e.outgoing),r.value.set("3",e.missed))},document:Y,variables:()=>({})});function g(e){return r.value.get(e)??-1}function C(){var _;const e=w.currentRoute.value,u=K(((_=e.query.q)==null?void 0:_.toString())??"");M(l,u),c.value=l.type??"",i.value=l.tagIds.length===1?l.tagIds[0]:"",c.value&&(i.value=""),y()}C(),G(()=>w.currentRoute.value,()=>{C()});function z(e){const u=te([{name:"type",op:"",value:e}]);x(t,`/calls?q=${se(u)}`)}function T(){x(t,"/calls")}const k=()=>{y()};return O(()=>{L.on("calls_deleted",k)}),W(()=>{L.off("calls_deleted",k)}),(e,u)=>{const _=ne,q=me,A=re,H=le,Q=N,R=I;return s(),m(R,null,{body:J(()=>[n("ul",de,[n("li",{class:B({active:!i.value&&!c.value}),onClick:b(T,["prevent"])},[n("span",pe,[$(_)]),n("span",ve,d(e.$t("all")),1),V(v).calls>=0?(s(),a("span",he,d(V(v).calls.toLocaleString()),1)):S("",!0)],2),(s(),a(ee,null,Z(["1","2","3"],o=>n("li",{key:o,class:B({active:o===c.value}),onClick:b(ke=>z(o),["prevent"])},[n("span",ye,[o==="1"?(s(),m(q,{key:0})):o==="2"?(s(),m(A,{key:1})):(s(),m(H,{key:2}))]),n("span",ge,d(e.$t(`call_type.${o}`)),1),g(o)>=0?(s(),a("span",Ce,d(g(o).toLocaleString()),1)):S("",!0)],10,fe)),64))]),$(Q,{type:"CALL",selected:i.value},null,8,["selected"])]),_:1})}}});export{Ve as default};
