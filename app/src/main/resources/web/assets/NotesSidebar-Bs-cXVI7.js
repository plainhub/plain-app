import{_ as q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-rYBRxPjc.js";import{_ as N}from"./TagFilter.vuevuetypescriptsetuptruelang-DD5LtWg2.js";import{d as $,e as A,s as I,f as L,W as M,r as m,Y as Q,w as R,ai as E,a7 as h,aj as V,M as j,o as i,v as z,aa as v,a8 as D,a9 as H,bH as x,a as s,j as G,A as g,R as y,c as S,h as k,t as r,k as l,D as O,C,E as P}from"./index-CiJYwD0I.js";import"./VDropdownMenu-CxTbhC5S.js";import"./more-vert-CEF7zZdM.js";const U={class:"nav"},W={class:"title"},Y={key:0,class:"count"},F={class:"title"},J={key:0,class:"count"},ae=$({__name:"NotesSidebar",setup(K){const u=A(),{counter:t}=I(L()),{parseQ:T}=H(),a=M({tagIds:[]}),o=m(!1),n=m(""),{fetch:d}=Q({handle:e=>{e&&(t.value.notes=e.total,t.value.notesTrash=e.trash)},document:x,variables:()=>({})});function _(){var c;const e=v.currentRoute.value,p=D(((c=e.query.q)==null?void 0:c.toString())??"");T(a,p),n.value=a.tagIds.length===1?a.tagIds[0]:"",o.value=a.trash??!1,o.value&&(n.value=""),d()}_(),R(()=>v.currentRoute.value,()=>{_()});function b(){const e=O([{name:"trash",op:"",value:"true"}]);C(u,`/notes?q=${P(e)}`)}function w(){C(u,"/notes")}const f=()=>{d()};return E(()=>{h.on("notes_actioned",f)}),V(()=>{h.off("notes_actioned",f)}),(e,p)=>{const c=N,B=q;return i(),j(B,null,{body:z(()=>[s("ul",U,[s("li",{class:y({active:!n.value&&!o.value}),onClick:g(w,["prevent"])},[s("span",W,r(e.$t("all")),1),l(t).notes>=0?(i(),S("span",Y,r(l(t).notes.toLocaleString()),1)):k("",!0)],2),s("li",{class:y({active:o.value}),onClick:g(b,["prevent"])},[s("span",F,r(e.$t("trash")),1),l(t).notesTrash>=0?(i(),S("span",J,r(l(t).notesTrash.toLocaleString()),1)):k("",!0)],2)]),G(c,{type:"NOTE",selected:n.value},null,8,["selected"])]),_:1})}}});export{ae as default};
