import{_ as T}from"./LeftSidebar.vuevuetypescriptsetuptruelang-rYBRxPjc.js";import{_ as A}from"./TagFilter.vuevuetypescriptsetuptruelang-DD5LtWg2.js";import{d as I,e as Q,s as R,f as D,W as N,r as p,Y as V,w as j,ai as z,a7 as h,aj as E,M as x,o as i,v as F,aa as C,a8 as G,a9 as H,ak as P,a,j as U,c as _,A as k,R as S,h as B,t as u,k as L,a1 as W,a0 as Y,D as J,C as $,E as K}from"./index-CiJYwD0I.js";import"./VDropdownMenu-CxTbhC5S.js";import"./more-vert-CEF7zZdM.js";const O={class:"nav"},X={class:"title"},Z={key:0,class:"count"},ee=["onClick"],te={class:"title"},ae={key:0,class:"count"},ue=I({__name:"CallsSidebar",setup(se){const m=Q(),{counter:d}=R(D()),{parseQ:w}=H(),s=N({tagIds:[]}),o=p(""),n=p(""),l=p(new Map),{fetch:v}=V({handle:e=>{e&&(d.value.calls=e.total,l.value.set("1",e.incoming),l.value.set("2",e.outgoing),l.value.set("3",e.missed))},document:P,variables:()=>({})});function f(e){return l.value.get(e)??-1}function y(){var r;const e=C.currentRoute.value,c=G(((r=e.query.q)==null?void 0:r.toString())??"");w(s,c),o.value=s.type??"",n.value=s.tagIds.length===1?s.tagIds[0]:"",o.value&&(n.value=""),v()}y(),j(()=>C.currentRoute.value,()=>{y()});function b(e){const c=J([{name:"type",op:"",value:e}]);$(m,`/calls?q=${K(c)}`)}function q(){$(m,"/calls")}const g=()=>{v()};return z(()=>{h.on("calls_deleted",g)}),E(()=>{h.off("calls_deleted",g)}),(e,c)=>{const r=A,M=T;return i(),x(M,null,{body:F(()=>[a("ul",O,[a("li",{class:S({active:!n.value&&!o.value}),onClick:k(q,["prevent"])},[a("span",X,u(e.$t("all")),1),L(d).calls>=0?(i(),_("span",Z,u(L(d).calls.toLocaleString()),1)):B("",!0)],2),(i(),_(Y,null,W(["1","2","3"],t=>a("li",{key:t,class:S({active:t===o.value}),onClick:k(oe=>b(t),["prevent"])},[a("span",te,u(e.$t(`call_type.${t}`)),1),f(t)>=0?(i(),_("span",ae,u(f(t).toLocaleString()),1)):B("",!0)],10,ee)),64))]),U(r,{type:"CALL",selected:n.value},null,8,["selected"])]),_:1})}}});export{ue as default};
