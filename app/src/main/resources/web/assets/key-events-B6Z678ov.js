import{d as w,c as y,o as m,a as _,h as S,a5 as B,W as N,U as b,L as D,u as T,G as q,ab as M,cP as L,r as h,X as I}from"./index-Bsb9VlRU.js";const R={class:"skeleton-item-phone selectable-card-skeleton"},U={class:"phone-left"},V={key:0,class:"skeleton-image"},F={class:"phone-content"},W={class:"subtitle-container"},X={key:0,class:"actions"},O=w({__name:"SkeletonItemPhone",props:{titleWidth:{default:"70%"},subtitles:{default:()=>[{width:"60%",height:"18px"}]},actionCount:{default:0},image:{type:Boolean,default:!0}},setup(r){return(u,o)=>(m(),y("section",R,[_("div",U,[o[0]||(o[0]=_("div",{class:"skeleton-checkbox"},null,-1)),u.image?(m(),y("div",V)):S("",!0)]),_("div",F,[_("div",{class:"title skeleton-text",style:B({width:u.titleWidth})},null,4),_("div",W,[(m(!0),y(N,null,b(u.subtitles,(l,e)=>(m(),y("div",{key:e,class:"subtitle skeleton-text",style:B({width:l.width,height:l.height||"16px"})},null,4))),128))]),u.actionCount?(m(),y("div",X,[(m(!0),y(N,null,b(u.actionCount,l=>(m(),y("div",{key:l,class:"skeleton-action-square"}))),128))])):S("",!0)])]))}}),j=D(O,[["__scopeId","data-v-56b28efa"]]),z=r=>{const u=h(!1),o=h(!1),l=h(0),e=h([]),a=h(null),c=h([]),t=h(!1),v=s=>{s?u.value=r.value.every(n=>e.value.includes(n.id)):(u.value=!1,o.value=!1)},f=s=>{if(a.value===null)return[];const n=Math.min(a.value,s),i=Math.max(a.value,s),k=r.value[a.value].id;return r.value.slice(n,i+1).map(d=>d.id).filter(d=>d!==k)},g=(s,n)=>{if(a.value!==null&&a.value!==n&&c.value.length>0){if(t.value)for(const i of c.value)e.value.includes(i)||e.value.push(i);else e.value=e.value.filter(i=>!c.value.includes(i));c.value=[],a.value=n,t.value=e.value.includes(s.id),v(t.value)}else p(!e.value.includes(s.id),s,n)},p=(s,n,i)=>{s?e.value.push(n.id):e.value=e.value.filter(k=>k!==n.id),a.value=i,t.value=s,v(s)},C=()=>{u.value=!0,e.value=r.value.map(s=>s.id)};return{realAllChecked:o,allChecked:u,toggleAllChecked:s=>{s.target.checked?C():(u.value=!1,o.value=!1,e.value=[])},selectAll:C,allCheckedAlertVisible:I(()=>u.value&&!o.value&&e.value.length<l.value),selectRealAll:()=>{o.value=!0},clearSelection:()=>{u.value=!1,o.value=!1,e.value=[],a.value=null,t.value=!1,c.value=[]},selectedIds:e,total:l,checked:I(()=>e.value.length>0),shouldSelect:t,shiftEffectingIds:c,toggleSelect:(s,n,i)=>{s.shiftKey?g(n,i):p(!e.value.includes(n.id),n,i)},handleItemClick(s,n,i,k=()=>{}){var E;if(((E=s.target)==null?void 0:E.nodeName)==="V-CHECKBOX")return;const d=window.getSelection();if(d&&d.toString()){const K=s.currentTarget;if(K&&d.rangeCount>0){const A=d.getRangeAt(0);if(K.contains(A.commonAncestorContainer))return}}if(e.value.length===0){k(i);return}s.shiftKey?g(n,i):p(!e.value.includes(n.id),n,i)},handleMouseOver(s,n){s.shiftKey?a.value!==null&&a.value!==n&&(c.value=f(n)):c.value=[]}}},G=(r,u)=>{const{t:o}=T();return{deleteItems:(l,e,a,c)=>{let t=c;if(!e){if(l.length===0){q(o("select_first"),"error");return}t=`ids:${l.join(",")}`}M(L,{gql:r,count:e?a:l.length,variables:()=>({query:t}),done:u})}}};function P(){const r=document.activeElement;return r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.tagName==="SELECT")}const H=(r,u,o,l,e,a,c)=>({keyDown:t=>{var g,p;if(document.querySelector("md-dialog[open]")||document.getElementsByClassName("lightbox").length>0)return;const v=(g=document.getElementsByClassName("scroll-content"))==null?void 0:g[0];t.shiftKey?v==null||v.style.setProperty("user-select","none"):v==null||v.style.removeProperty("user-select");const f=(p=document.getElementsByClassName("scroller"))==null?void 0:p[0];if(t.shiftKey?f==null||f.style.setProperty("user-select","none"):f==null||f.style.removeProperty("user-select"),(t.ctrlKey||t.metaKey)&&t.key==="a"&&!P()){t.preventDefault(),l();return}if(t.key==="Escape")e();else if(t.key==="ArrowLeft")o.value>1&&a(o.value-1);else if(t.key==="ArrowRight"){const C=Math.ceil(r.value/u);o.value<C&&a(o.value+1)}else(t.key==="Delete"||(t.ctrlKey||t.metaKey)&&t.key==="Backspace")&&c()},keyUp:()=>{var v;const t=(v=document.getElementsByClassName("scroll-content"))==null?void 0:v[0];t==null||t.style.removeProperty("user-select")}}),x=(r,u,o)=>({keyDown:l=>{var c,t;if(document.querySelector("md-dialog[open]"))return;const e=(c=document.getElementsByClassName("scroll-content"))==null?void 0:c[0];l.shiftKey?e==null||e.style.setProperty("user-select","none"):e==null||e.style.removeProperty("user-select");const a=(t=document.getElementsByClassName("scroller"))==null?void 0:t[0];if(l.shiftKey?a==null||a.style.setProperty("user-select","none"):a==null||a.style.removeProperty("user-select"),(l.ctrlKey||l.metaKey)&&l.key==="a"&&!P()){l.preventDefault(),r();return}l.key==="Escape"?u():(l.key==="Delete"||(l.ctrlKey||l.metaKey)&&l.key==="Backspace")&&o()},keyUp:()=>{var e;const l=(e=document.getElementsByClassName("scroll-content"))==null?void 0:e[0];l==null||l.style.removeProperty("user-select")}});export{j as _,z as a,H as b,x as c,G as u};
