import{_ as xt}from"./VPagination.vuevuetypescriptsetuptruelang-CdD3UgAj.js";import{_ as es,a as ts,b as ss}from"./key-events-Ck9VlIhj.js";import{d as J,c as y,O as d,o as a,a as l,as as os,t as _,m as He,u as me,W as D,$ as f,h as C,a1 as ye,k as t,H as Oe,A as u,v as g,j as r,at as Ge,b3 as je,b4 as ae,aE as We,b5 as ne,b6 as le,b7 as Xe,aj as Ze,bn as is,a9 as as,T as Je,bj as De,aZ as Be,q as qe,au as Re,av as ns,aa as ls,I as Ve,ab as Ue,i as de,bo as ds,bp as rs,s as re,f as Ye,ad as F,X as ue,G as pe,r as V,bq as us,e as ps,M as ms,aG as ze,aH as ys,ae as cs,b8 as gs,aw as vs,b9 as fs,aI as hs,N as ks,ba as bs,bb as Is,w as _s,Y as Ts,Z as ws,aJ as $s,K as Fs,aK as Ps,U as Ke,a3 as Cs,ac as Ne,aQ as As,br as Ms,aP as Ss,bf as Es,a6 as Ls,C as Ds,bs as Qe,ao as Bs,bh as qs,Q as Rs,R as Vs,L as Us}from"./index-9yvO6RpE.js";import{_ as zs}from"./ListItemPhone.vuevuetypescriptsetuptruelang-BFVQT8k7.js";import{_ as Ks}from"./FieldId.vuevuetypescriptsetuptruelang-RirpqDM0.js";import{_ as xe}from"./VCheckbox-Dh3imU8v.js";import{_ as Ns}from"./AllCheckedAlert.vuevuetypescriptsetuptruelang-CG5JX0Ln.js";import{c as Qs,_ as Hs,K as Os,m as Gs}from"./media-BjOIc8qQ.js";import"./check-rounded-D2ZWzGlc.js";import"./VolumeCard.vuevuetypescriptsetuptruelang-DPmYRe-p.js";import"./upload-rounded-FU_oOno0.js";const js={key:0,class:"media-item selectable-card-skeleton"},Ws={class:"start"},Xs={class:"number"},Zs=J({__name:"AudioSkeletonItem",props:{index:{},isPhone:{type:Boolean}},setup(A){return(e,s)=>{const n=es;return e.isPhone?(a(),d(n,{key:1,"title-width":"70%",subtitles:[{width:"45%"},{width:"40%"},{width:"50%"}],"action-count":4})):(a(),y("section",js,[l("div",Ws,[s[0]||(s[0]=l("div",{class:"skeleton-checkbox"},null,-1)),l("span",Xs,_(e.index),1)]),s[1]||(s[1]=os('<div class="image"><div class="skeleton-image lg"></div></div><div class="title"><div class="skeleton-text lg" style="width:40%;"></div></div><div class="subtitle"><div class="skeleton-text" style="width:30%;"></div></div><div class="actions"><div class="skeleton-text lg" style="width:140px;"></div></div><div class="artist"><div class="skeleton-text" style="width:60px;"></div></div><div class="time"><div class="skeleton-text" style="width:60px;"></div></div>',6))]))}}}),Js={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ys(A,e){return a(),y("svg",Js,e[0]||(e[0]=[l("path",{fill:"currentColor",d:"M10 16q.425 0 .713-.288T11 15V9q0-.425-.288-.712T10 8t-.712.288T9 9v6q0 .425.288.713T10 16m4 0q.425 0 .713-.288T15 15V9q0-.425-.288-.712T14 8t-.712.288T13 9v6q0 .425.288.713T14 16m-2 6q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"},null,-1)]))}const xs=He({name:"material-symbols-pause-circle-outline-rounded",render:Ys}),eo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function to(A,e){return a(),y("svg",eo,e[0]||(e[0]=[l("path",{fill:"currentColor",d:"M3 16v-2h7v2zm0-4v-2h11v2zm0-4V6h11v2zm13 12v-4h-4v-2h4v-4h2v4h4v2h-4v4z"},null,-1)]))}const et=He({name:"material-symbols-playlist-add",render:to}),so={class:"actions"},oo=J({__name:"AudioActionButtons",props:{item:{},filter:{},dataType:{},editMode:{type:Boolean},animatingIds:{},playLoading:{type:Boolean},playPath:{},app:{},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},handleRemoveFromPlaylist:{type:Function},addToPlaylist:{type:Function},addItemToTags:{type:Function},pause:{type:Function},isAudioPlaying:{type:Function},isInPlaylist:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(A){const{t:e}=me();return(s,n)=>{const T=Ge,c=Oe,U=je,k=We,M=Xe,B=Ze,p=is,S=et,P=as,v=xs,b=ye("tooltip");return a(),y("div",so,[s.filter.trash?(a(),y(D,{key:0},[s.editMode?f((a(),d(c,{key:0,class:"sm",onClick:n[0]||(n[0]=u(I=>s.deleteItem(s.dataType,s.item),["stop"]))},{default:g(()=>[r(T)]),_:1})),[[b,t(e)("delete")]]):C("",!0),f((a(),d(c,{class:"sm",loading:s.restoreLoading(`ids:${s.item.id}`),onClick:n[1]||(n[1]=u(I=>s.restore(s.dataType,`ids:${s.item.id}`),["stop"]))},{default:g(()=>[r(U)]),_:1},8,["loading"])),[[b,t(e)("restore")]]),f((a(),d(c,{class:"sm",onClick:n[2]||(n[2]=u(I=>s.downloadFile(s.item.path,t(ae)(s.item.path).replace(" ","-")),["stop"]))},{default:g(()=>[r(k)]),_:1})),[[b,t(e)("download")]])],64)):(a(),y(D,{key:1},[s.editMode?(a(),y(D,{key:0},[t(ne)(t(le).MEDIA_TRASH,s.app.osVersion)?f((a(),d(c,{key:0,class:"sm",loading:s.trashLoading(`ids:${s.item.id}`),onClick:n[3]||(n[3]=u(I=>s.trash(s.dataType,`ids:${s.item.id}`),["stop"]))},{default:g(()=>[r(M)]),_:1},8,["loading"])),[[b,t(e)("move_to_trash")]]):f((a(),d(c,{key:1,class:"sm",onClick:n[4]||(n[4]=u(I=>s.deleteItem(s.dataType,s.item),["stop"]))},{default:g(()=>[r(T)]),_:1})),[[b,t(e)("delete")]]),f((a(),d(c,{class:"sm",onClick:n[5]||(n[5]=u(I=>s.downloadFile(s.item.path,t(ae)(s.item.path).replace(" ","-")),["stop"]))},{default:g(()=>[r(k)]),_:1})),[[b,t(e)("download")]]),f((a(),d(c,{class:"sm",onClick:n[6]||(n[6]=u(I=>s.addItemToTags(s.item),["stop"]))},{default:g(()=>[r(B)]),_:1})),[[b,t(e)("add_to_tags")]])],64)):(a(),y(D,{key:1},[f((a(),d(c,{class:"sm",onClick:n[7]||(n[7]=u(I=>s.downloadFile(s.item.path,t(ae)(s.item.path).replace(" ","-")),["stop"]))},{default:g(()=>[r(k)]),_:1})),[[b,t(e)("download")]]),s.isInPlaylist(s.item)&&!s.animatingIds.includes(s.item.id)?f((a(),d(c,{key:0,class:"sm",onClick:n[8]||(n[8]=u(I=>s.handleRemoveFromPlaylist(I,s.item),["stop","prevent"]))},{default:g(()=>[r(p,{class:"playlist-remove-icon"})]),_:1})),[[b,t(e)("remove_from_playlist")]]):s.isInPlaylist(s.item)&&s.animatingIds.includes(s.item.id)?(a(),d(c,{key:1,class:"sm",disabled:!0},{default:g(()=>[r(p,{class:"playlist-remove-icon rotating"})]),_:1})):!s.isInPlaylist(s.item)&&!s.animatingIds.includes(s.item.id)?f((a(),d(c,{key:2,class:"sm",onClick:n[9]||(n[9]=u(I=>s.addToPlaylist(I,s.item),["stop","prevent"]))},{default:g(()=>[r(S,{class:"playlist-add-icon"})]),_:1})),[[b,t(e)("add_to_playlist")]]):!s.isInPlaylist(s.item)&&s.animatingIds.includes(s.item.id)?(a(),d(c,{key:3,class:"sm",disabled:!0},{default:g(()=>[r(S,{class:"playlist-add-icon rotating"})]),_:1})):C("",!0),s.playLoading&&s.item.path===s.playPath?(a(),d(P,{key:4,indeterminate:"",class:"sm"})):s.isAudioPlaying(s.item)?f((a(),d(c,{key:5,class:"sm",onClick:n[10]||(n[10]=u(I=>s.pause(),["stop"]))},{default:g(()=>[r(v)]),_:1})),[[b,t(e)("pause")]]):C("",!0)],64))],64))])}}}),io={class:"start"},ao={class:"number"},no={class:"image"},lo=["src"],ro=["src"],uo={class:"title"},po={class:"subtitle"},mo={class:"duration"},yo={class:"artist"},co={class:"time"},go={class:"image"},vo=["src"],fo=["src"],ho={class:"subtitle"},ko={class:"duration"},bo={key:0,class:"subtitle"},Io={class:"subtitle"},_o={key:0,class:"artist"},To={class:"time"},wo=J({__name:"AudioListItem",props:{item:{},index:{},selectedIds:{},shiftEffectingIds:{},shouldSelect:{type:Boolean},isPhone:{type:Boolean},editMode:{type:Boolean},imageErrorIds:{},bucketsMap:{},filter:{},dataType:{},animatingIds:{},playLoading:{type:Boolean},playPath:{},mainStore:{},app:{},handleItemClick:{type:Function},handleMouseOver:{type:Function},toggleSelect:{type:Function},onImageError:{type:Function},viewBucket:{type:Function},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},handleRemoveFromPlaylist:{type:Function},addToPlaylist:{type:Function},addItemToTags:{type:Function},play:{type:Function},pause:{type:Function},isAudioPlaying:{type:Function},isInPlaylist:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(A){return(e,s)=>{var B;const n=xe,T=Ks,c=ns,U=oo,k=zs,M=ye("tooltip");return e.isPhone?(a(),d(k,{key:1,"is-selected":e.selectedIds.includes(e.item.id),"is-selecting":e.shiftEffectingIds.includes(e.item.id),"checkbox-checked":e.shiftEffectingIds.includes(e.item.id)?e.shouldSelect:e.selectedIds.includes(e.item.id),"show-checkbox":e.editMode,onClick:s[8]||(s[8]=p=>e.handleItemClick(p,e.item,e.index,()=>e.play(e.item))),onMouseenter:s[9]||(s[9]=u(p=>e.handleMouseOver(p,e.index),["stop"])),onCheckboxClick:s[10]||(s[10]=p=>e.toggleSelect(p,e.item,e.index))},{image:g(()=>[l("div",go,[e.imageErrorIds.includes(e.item.id)?(a(),y("img",{key:0,src:`/ficons/${t(De)(e.item.path)}.svg`,class:"svg"},null,8,vo)):(a(),y("img",{key:1,class:"image-thumb",src:t(Be)(e.item.albumFileId,"&w=200&h=200"),onError:s[6]||(s[6]=p=>e.onImageError(e.item.id))},null,40,fo))])]),title:g(()=>[Ve(_(e.item.title),1)]),subtitle:g(()=>{var p;return[l("div",ho,[l("span",null,_(t(qe)(e.item.size)),1),l("span",ko,_(t(Re)(e.item.duration)),1)]),e.bucketsMap[e.item.bucketId]||e.item.tags.length>0?(a(),y("div",bo,[l("a",{onClick:s[7]||(s[7]=u(S=>e.viewBucket(e.mainStore,e.item.bucketId),["stop","prevent"]))},_((p=e.bucketsMap[e.item.bucketId])==null?void 0:p.name),1),r(c,{tags:e.item.tags,type:e.dataType,"only-links":!0},null,8,["tags","type"])])):C("",!0),l("div",Io,[e.item.artist?(a(),y("span",_o,_(e.item.artist),1)):C("",!0),l("span",To,_(t(Ue)(e.item.createdAt)),1)])]}),actions:g(()=>[r(U,{item:e.item,filter:e.filter,"data-type":e.dataType,"edit-mode":e.editMode,"animating-ids":e.animatingIds,"play-loading":e.playLoading,"play-path":e.playPath,app:e.app,"delete-item":e.deleteItem,restore:e.restore,"download-file":e.downloadFile,trash:e.trash,"handle-remove-from-playlist":e.handleRemoveFromPlaylist,"add-to-playlist":e.addToPlaylist,"add-item-to-tags":e.addItemToTags,pause:e.pause,"is-audio-playing":e.isAudioPlaying,"is-in-playlist":e.isInPlaylist,"restore-loading":e.restoreLoading,"trash-loading":e.trashLoading},null,8,["item","filter","data-type","edit-mode","animating-ids","play-loading","play-path","app","delete-item","restore","download-file","trash","handle-remove-from-playlist","add-to-playlist","add-item-to-tags","pause","is-audio-playing","is-in-playlist","restore-loading","trash-loading"])]),_:1},8,["is-selected","is-selecting","checkbox-checked","show-checkbox"])):(a(),y("section",{key:0,class:Je(["media-item selectable-card",{selected:e.selectedIds.includes(e.item.id),selecting:e.shiftEffectingIds.includes(e.item.id)}]),onClick:s[4]||(s[4]=u(p=>e.handleItemClick(p,e.item,e.index,()=>e.play(e.item)),["stop"])),onMouseenter:s[5]||(s[5]=u(p=>e.handleMouseOver(p,e.index),["stop"]))},[l("div",io,[e.shiftEffectingIds.includes(e.item.id)?(a(),d(n,{key:0,class:"checkbox","touch-target":"wrapper",checked:e.shouldSelect,onClick:s[0]||(s[0]=u(p=>e.toggleSelect(p,e.item,e.index),["stop"]))},null,8,["checked"])):(a(),d(n,{key:1,class:"checkbox","touch-target":"wrapper",checked:e.selectedIds.includes(e.item.id),onClick:s[1]||(s[1]=u(p=>e.toggleSelect(p,e.item,e.index),["stop"]))},null,8,["checked"])),l("span",ao,[r(T,{id:e.index+1,raw:e.item},null,8,["id","raw"])])]),l("div",no,[e.imageErrorIds.includes(e.item.id)?(a(),y("img",{key:0,src:`/ficons/${t(De)(e.item.path)}.svg`,class:"svg"},null,8,lo)):(a(),y("img",{key:1,class:"image-thumb",src:t(Be)(e.item.albumFileId,"&w=200&h=200"),onError:s[2]||(s[2]=p=>e.onImageError(e.item.id))},null,40,ro))]),l("div",uo,_(e.item.title),1),l("div",po,[l("span",null,_(t(qe)(e.item.size)),1),l("span",mo,_(t(Re)(e.item.duration)),1),l("a",{onClick:s[3]||(s[3]=u(p=>e.viewBucket(e.mainStore,e.item.bucketId),["stop","prevent"]))},_((B=e.bucketsMap[e.item.bucketId])==null?void 0:B.name),1),r(c,{tags:e.item.tags,type:e.dataType,"only-links":!0},null,8,["tags","type"])]),r(U,{item:e.item,filter:e.filter,"data-type":e.dataType,"edit-mode":e.editMode,"animating-ids":e.animatingIds,"play-loading":e.playLoading,"play-path":e.playPath,app:e.app,"delete-item":e.deleteItem,restore:e.restore,"download-file":e.downloadFile,trash:e.trash,"handle-remove-from-playlist":e.handleRemoveFromPlaylist,"add-to-playlist":e.addToPlaylist,"add-item-to-tags":e.addItemToTags,pause:e.pause,"is-audio-playing":e.isAudioPlaying,"is-in-playlist":e.isInPlaylist,"restore-loading":e.restoreLoading,"trash-loading":e.trashLoading},null,8,["item","filter","data-type","edit-mode","animating-ids","play-loading","play-path","app","delete-item","restore","download-file","trash","handle-remove-from-playlist","add-to-playlist","add-item-to-tags","pause","is-audio-playing","is-in-playlist","restore-loading","trash-loading"]),l("div",yo,_(e.item.artist),1),l("div",co,[f((a(),y("span",null,[Ve(_(t(Ue)(e.item.createdAt)),1)])),[[M,t(ls)(e.item.createdAt)]])])],34))}}}),$o=(A,e)=>{const{mutate:s,loading:n,onDone:T}=de({document:ds}),{mutate:c,loading:U,onDone:k}=de({document:rs}),{app:M}=re(Ye()),{t:B}=me();T(()=>{F.emit("refetch_app"),e()}),k(()=>{F.emit("refetch_app")});const p=ue(()=>{var P;return((P=M.value)==null?void 0:P.audios)??[]}),S=P=>p.value.some(v=>v.path===P.path);return{loading:n,removeLoading:U,isInPlaylist:S,addItemsToPlaylist:(P,v,b,I)=>{let h=I;if(!b){if(v.length===0){pe(B("select_first"),"error");return}h=`ids:${v.join(",")}`}s({query:h})},removeItemsFromPlaylist:(P,v,b,I)=>{if(b)A.value.filter(h=>S(h)).forEach(h=>{c({path:h.path})});else{if(v.length===0){pe(B("select_first"),"error");return}A.value.filter(Q=>v.includes(Q.id)&&S(Q)).forEach(Q=>{c({path:Q.path})})}},addToPlaylist:(P,v)=>{s({query:`ids:${v.id}`})},removeFromPlaylist:(P,v)=>{c({path:v.path})}}},Fo=()=>{const A=V(""),{mutate:e,loading:s,onDone:n}=de({document:us});return n(()=>{F.emit("play_audio")}),{loading:s,playPath:A,play:T=>{A.value=T.path,e({path:T.path})},pause:()=>{F.emit("pause_audio")}}},Po={class:"top-app-bar"},Co={class:"title"},Ao={key:0},Mo={key:1},So={class:"actions"},Eo={key:0,class:"no-data-placeholder"},H=50,Lo=J({__name:"AudiosView",setup(A){const e=Fs("isPhone"),s=ps(),{audioSortBy:n}=re(s),T=V([]),{t:c}=me(),{parseQ:U}=Vs(),k=ms({tagIds:[],bucketId:void 0}),{app:M,urlTokenKey:B,audioPlaying:p,uploads:S}=re(Ye()),P=o=>{var i;return p.value&&((i=M.value)==null?void 0:i.audioCurrent)===o.path},v=V([]),b=V(!1),I=V(!1),h=ue({get:()=>k.trash?"edit":s.pageUIMode.audios??"view",set:o=>{k.trash||(s.pageUIMode.audios=o)}}),{input:Q,upload:tt,uploadChanged:ce}=ze(S),{input:st,upload:ot,uploadChanged:ge}=ze(S),{dropping:it,fileDragEnter:ve,fileDragLeave:fe,dropFiles:at}=ys(S),he=V(!1),w=cs.AUDIO,j=Ls(),W=V(1),{tags:Y,buckets:x,fetch:nt}=gs(w),lt=ue(()=>{const o={};return x.value.forEach(i=>{o[i.id]=i}),o}),E=V(""),{addToTags:dt}=vs(w,Y),{deleteItems:ee,deleteItem:rt}=fs(),{view:ut}=Es(w),{selectedIds:L,allChecked:ke,realAllChecked:q,selectRealAll:pt,allCheckedAlertVisible:mt,clearSelection:N,toggleAllChecked:yt,toggleSelect:ct,total:R,checked:X,shiftEffectingIds:gt,handleItemClick:vt,handleMouseOver:ft,selectAll:ht,shouldSelect:kt}=ts(T),{downloadItems:be}=hs(B,w,N,()=>As("audios")),{downloadFile:bt}=Ss(B),Ie=o=>{const i=j.query.q;Ds(s,i?`/audios?page=${o}&q=${i}`:`/audios?page=${o}`)},It=()=>{h.value==="edit"&&ht()},_t=()=>{h.value==="edit"&&N()},Tt=()=>{h.value==="edit"&&(ne(le.MEDIA_TRASH,M.value.osVersion)?se(w,G()):ee(w,L.value,q.value,R.value,E.value))},{keyDown:_e,keyUp:Te}=ss(R,H,W,It,_t,Ie,Tt),{addItemsToPlaylist:wt,addToPlaylist:$t,removeFromPlaylist:Ft,isInPlaylist:Pt}=$o(T,N),Ct=$s(),we=V([]),{play:At,playPath:Mt,loading:St,pause:Et}=Fo(),Lt=o=>{we.value.push(o)},{loading:te,fetch:O}=ks({handle:(o,i)=>{he.value=!1,i?pe(c(i),"error"):o&&(T.value=o.items,R.value=o.total)},document:Ms,variables:()=>({offset:(W.value-1)*H,limit:H,query:E.value,sortBy:n.value})}),{trashLoading:$e,trash:se}=bs(),{restoreLoading:Fe,restore:Pe}=Is(),oe=Qs({filter:k,buckets:x,picker:{title:c("upload_select_destination"),description:c("upload_select_destination_desc"),initialPath:"",modalId:"upload-directory-picker-audios",storageKey:"plainweb.uploadDir.audios"}});function Dt(o){n.value!==o&&(he.value=!0,n.value=o)}function Bt(){k.trash||(N(),h.value=h.value==="edit"?"view":"edit")}function qt(){Ne(Os,{title:c("keyboard_shortcuts"),shortcuts:Gs})}function Rt(o,i){h.value==="edit"&&ft(o,i)}async function Vt(){const o=await oe.resolveTargetDir();o&&tt(o)}async function Ut(){const o=await oe.resolveTargetDir();o&&ot(o)}function zt(o){at(o,oe.resolveTargetDir,i=>Qe(i.name))}const G=()=>{let o=E.value;return q.value||(o=`ids:${L.value.join(",")}`),o},Ce=o=>{o.type===w&&(N(),O())},Ae=o=>{o.type===w&&O()},Me=o=>{o.type===w&&(N(),O())},Se=o=>{o.status==="done"&&Qe(o.fileName)&&((!k.bucketId||x.value.some($=>$.id===k.bucketId&&$.topItems.some(Z=>o.dir.startsWith(qs(Z)))))&&setTimeout(()=>{O()},1e3),F.emit("media_items_actioned",{type:w,action:"upload",query:""}))};function Kt(o){const i=o.tags.map($=>$.id);Ne(Bs,{type:w,tags:Y.value,item:{key:o.id,title:o.title,size:o.size},selected:Y.value.filter($=>i.includes($.id))})}function Nt(o,i){v.value.push(i.id),setTimeout(()=>{Ft(o,i),setTimeout(()=>{v.value=v.value.filter($=>$!==i.id)},200)},150)}function Qt(o,i){v.value.push(i.id),setTimeout(()=>{$t(o,i),setTimeout(()=>{v.value=v.value.filter($=>$!==i.id)},200)},150)}const ie=V(!1);function Ee(){var i,$;const o=parseInt(((i=j.query.page)==null?void 0:i.toString())??"1");W.value=Number.isFinite(o)&&o>0?o:1,E.value=Rs((($=j.query.q)==null?void 0:$.toString())??""),U(k,E.value),O()}return _s(()=>j.fullPath,()=>{ie.value&&Ee()}),Ts(()=>{nt(),ie.value=!0,Ee(),F.on("item_tags_updated",Ae),F.on("items_tags_updated",Ce),F.on("media_items_actioned",Me),F.on("upload_task_done",Se),window.addEventListener("keydown",_e),window.addEventListener("keyup",Te)}),ws(()=>{ie.value=!1,F.off("item_tags_updated",Ae),F.off("items_tags_updated",Ce),F.off("media_items_actioned",Me),F.off("upload_task_done",Se),window.removeEventListener("keydown",_e),window.removeEventListener("keyup",Te)}),(o,i)=>{const $=xe,Z=Ge,z=Oe,Ht=je,Le=We,Ot=Xe,Gt=Ze,jt=et,Wt=Ns,Xt=wo,Zt=Zs,Jt=xt,K=ye("tooltip");return a(),y(D,null,[l("div",Po,[r($,{"touch-target":"wrapper",checked:t(ke),indeterminate:!t(ke)&&t(X),onChange:t(yt)},null,8,["checked","indeterminate","onChange"]),l("div",Co,[t(L).length?(a(),y("span",Ao,_(o.$t("x_selected",{count:t(q)?t(R).toLocaleString():t(L).length.toLocaleString()})),1)):(a(),y("span",Mo,_(o.$t("page_title.audios"))+" ("+_(t(R).toLocaleString())+")",1)),t(X)?(a(),y(D,{key:2},[k.trash?(a(),y(D,{key:0},[f((a(),d(z,{onClick:i[0]||(i[0]=u(m=>t(ee)(t(w),t(L),t(q),t(R),E.value),["stop"]))},{default:g(()=>[r(Z)]),_:1})),[[K,o.$t("delete")]]),f((a(),d(z,{loading:t(Fe)(G()),onClick:i[1]||(i[1]=u(m=>t(Pe)(t(w),G()),["stop"]))},{default:g(()=>[r(Ht)]),_:1},8,["loading"])),[[K,o.$t("restore")]]),f((a(),d(z,{onClick:i[2]||(i[2]=u(m=>t(be)(t(q),t(L),E.value),["stop"]))},{default:g(()=>[r(Le)]),_:1})),[[K,o.$t("download")]])],64)):(a(),y(D,{key:1},[h.value==="edit"?(a(),y(D,{key:0},[t(ne)(t(le).MEDIA_TRASH,t(M).osVersion)?f((a(),d(z,{key:0,loading:t($e)(G()),onClick:i[3]||(i[3]=u(m=>t(se)(t(w),G()),["stop"]))},{default:g(()=>[r(Ot)]),_:1},8,["loading"])),[[K,o.$t("move_to_trash")]]):f((a(),d(z,{key:1,onClick:i[4]||(i[4]=u(m=>t(ee)(t(w),t(L),t(q),t(R),E.value),["stop"]))},{default:g(()=>[r(Z)]),_:1})),[[K,o.$t("delete")]]),f((a(),d(z,{onClick:i[5]||(i[5]=u(m=>t(dt)(t(L),t(q),E.value),["stop"]))},{default:g(()=>[r(Gt)]),_:1})),[[K,o.$t("add_to_tags")]])],64)):C("",!0),f((a(),d(z,{onClick:i[6]||(i[6]=u(m=>t(be)(t(q),t(L),E.value),["stop"]))},{default:g(()=>[r(Le)]),_:1})),[[K,o.$t("download")]]),h.value!=="edit"?f((a(),d(z,{key:1,onClick:i[7]||(i[7]=u(m=>t(wt)(m,t(L),t(q),E.value),["stop"]))},{default:g(()=>[r(jt)]),_:1})),[[K,o.$t("add_to_playlist")]]):C("",!0)],64))],64)):C("",!0)]),l("div",So,[r(Hs,{placement:"top","ui-mode":h.value,"filter-trash":!!k.trash,"is-phone":t(e),checked:t(X),"upload-menu-visible":b.value,"more-menu-visible":I.value,"sort-by":t(n),"sort-items":t(Ct),"show-view-toggle":!1,"on-toggle-ui-mode":Bt,"on-upload-files":Vt,"on-upload-dir":Ut,"on-open-keyboard-shortcuts":qt,"on-sort":Dt,"onUpdate:uploadMenuVisible":i[8]||(i[8]=m=>b.value=m),"onUpdate:moreMenuVisible":i[9]||(i[9]=m=>I.value=m)},null,8,["ui-mode","filter-trash","is-phone","checked","upload-menu-visible","more-menu-visible","sort-by","sort-items"])])]),h.value==="edit"?(a(),d(Wt,{key:0,limit:H,total:t(R),"all-checked-alert-visible":t(mt),"real-all-checked":t(q),"select-real-all":t(pt),"clear-selection":t(N)},null,8,["total","all-checked-alert-visible","real-all-checked","select-real-all","clear-selection"])):C("",!0),l("div",{class:"scroll-content",onDragover:i[13]||(i[13]=u((...m)=>t(ve)&&t(ve)(...m),["stop","prevent"]))},[f(l("div",{class:"drag-mask",onDrop:u(zt,["stop","prevent"]),onDragleave:i[10]||(i[10]=u((...m)=>t(fe)&&t(fe)(...m),["stop","prevent"]))},_(o.$t("release_to_send_files")),545),[[Ps,t(it)]]),l("div",{class:Je(["main-list",{"select-mode":t(X)}])},[(a(!0),y(D,null,Ke(T.value,(m,Yt)=>(a(),d(Xt,{key:m.id,item:m,index:Yt,"is-phone":t(e),"selected-ids":t(L),"shift-effecting-ids":t(gt),"should-select":t(kt),"image-error-ids":we.value,"buckets-map":lt.value,filter:k,"data-type":t(w),"animating-ids":v.value,"play-loading":t(St),"play-path":t(Mt),"main-store":t(s),app:t(M),"handle-item-click":t(vt),"handle-mouse-over":Rt,"toggle-select":t(ct),"on-image-error":Lt,"view-bucket":t(ut),"delete-item":t(rt),restore:t(Pe),"download-file":t(bt),trash:t(se),"handle-remove-from-playlist":Nt,"add-to-playlist":Qt,"add-item-to-tags":Kt,play:t(At),pause:t(Et),"is-audio-playing":P,"is-in-playlist":t(Pt),"restore-loading":t(Fe),"trash-loading":t($e),"edit-mode":h.value==="edit"},null,8,["item","index","is-phone","selected-ids","shift-effecting-ids","should-select","image-error-ids","buckets-map","filter","data-type","animating-ids","play-loading","play-path","main-store","app","handle-item-click","toggle-select","view-bucket","delete-item","restore","download-file","trash","play","pause","is-in-playlist","restore-loading","trash-loading","edit-mode"]))),128)),t(te)&&T.value.length===0?(a(),y(D,{key:0},Ke(20,m=>r(Zt,{key:m,index:m,"is-phone":t(e)},null,8,["index","is-phone"])),64)):C("",!0)],2),!t(te)&&T.value.length===0?(a(),y("div",Eo,_(o.$t(t(Cs)(t(te),t(M).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):C("",!0),t(R)>H?(a(),d(Jt,{key:1,page:W.value,go:Ie,total:t(R),limit:H},null,8,["page","total"])):C("",!0),l("input",{ref_key:"fileInput",ref:Q,style:{display:"none"},type:"file",accept:"audio/*",multiple:"",onChange:i[11]||(i[11]=(...m)=>t(ce)&&t(ce)(...m))},null,544),l("input",{ref_key:"dirFileInput",ref:st,style:{display:"none"},type:"file",accept:"audio/*",multiple:"",webkitdirectory:"",mozdirectory:"",directory:"",onChange:i[12]||(i[12]=(...m)=>t(ge)&&t(ge)(...m))},null,544)],32)],64)}}}),Oo=Us(Lo,[["__scopeId","data-v-f5ac59fc"]]);export{Oo as default};
