import{_ as Q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-BDdMylOV.js";import{_ as $}from"./TagFilter.vuevuetypescriptsetuptruelang-KR6lKuRu.js";import{_ as I}from"./trash-B61pKMNv.js";import{_ as L}from"./layout-grid-BgBqmbBg.js";import{d as M,e as R,s as E,f as V,M as z,r as f,N as D,w as O,aA as P,ad as v,aB as j,O as x,o as l,v as G,P as g,Q as H,R as U,bT as F,a as t,j as u,A as y,T,c as S,h as k,t as r,k as i,D as J,C,E as K}from"./index-9yvO6RpE.js";import"./VDropdownMenu-BCHmjly-.js";const W={class:"nav"},X={class:"icon","aria-hidden":"true"},Y={class:"title"},Z={key:0,class:"count"},ee={class:"icon","aria-hidden":"true"},te={class:"title"},se={key:0,class:"count"},ue=M({__name:"NotesSidebar",setup(ae){const _=R(),{counter:s}=E(V()),{parseQ:B}=U(),a=z({tagIds:[]}),o=f(!1),n=f(""),{fetch:d}=D({handle:e=>{e&&(s.value.notes=e.total,s.value.notesTrash=e.trash)},document:F,variables:()=>({})});function p(){var c;const e=g.currentRoute.value,h=H(((c=e.query.q)==null?void 0:c.toString())??"");B(a,h),n.value=a.tagIds.length===1?a.tagIds[0]:"",o.value=a.trash??!1,o.value&&(n.value=""),d()}p(),O(()=>g.currentRoute.value,()=>{p()});function b(){const e=J([{name:"trash",op:"",value:"true"}]);C(_,`/notes?q=${K(e)}`)}function w(){C(_,"/notes")}const m=()=>{d()};return P(()=>{v.on("notes_actioned",m)}),j(()=>{v.off("notes_actioned",m)}),(e,h)=>{const c=L,N=I,q=$,A=Q;return l(),x(A,null,{body:G(()=>[t("ul",W,[t("li",{class:T({active:!n.value&&!o.value}),onClick:y(w,["prevent"])},[t("span",X,[u(c)]),t("span",Y,r(e.$t("all")),1),i(s).notes>=0?(l(),S("span",Z,r(i(s).notes.toLocaleString()),1)):k("",!0)],2),t("li",{class:T({active:o.value}),onClick:y(b,["prevent"])},[t("span",ee,[u(N)]),t("span",te,r(e.$t("trash")),1),i(s).notesTrash>=0?(l(),S("span",se,r(i(s).notesTrash.toLocaleString()),1)):k("",!0)],2)]),u(q,{type:"NOTE",selected:n.value},null,8,["selected"])]),_:1})}}});export{ue as default};
