import{_ as I}from"./LeftSidebar.vuevuetypescriptsetuptruelang-BDdMylOV.js";import{_ as N}from"./TagFilter.vuevuetypescriptsetuptruelang-KR6lKuRu.js";import{m as f,c as o,o as s,a as n,d as D,e as E,s as P,f as U,M as j,r as h,N as F,w as G,aA as O,ad as L,aB as W,O as d,v as J,P as w,Q as K,R as X,aC as Y,j as $,A as b,T as B,h as S,t as m,k as V,U as Z,W as ee,D as te,C as x,E as se}from"./index-9yvO6RpE.js";import{_ as ne}from"./layout-grid-BgBqmbBg.js";import"./VDropdownMenu-BCHmjly-.js";const ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function oe(p,t){return s(),o("svg",ae,t[0]||(t[0]=[n("path",{fill:"currentColor",d:"m12 17.425l-7-7V15H3V7h8v2H6.4l5.6 5.6L19.6 7L21 8.425z"},null,-1)]))}const le=f({name:"material-symbols-call-missed",render:oe}),ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ie(p,t){return s(),o("svg",ce,t[0]||(t[0]=[n("path",{fill:"currentColor",d:"M5.4 20L4 18.6L15.6 7H9V5h10v10h-2V8.4z"},null,-1)]))}const re=f({name:"material-symbols-call-made",render:ie}),ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _e(p,t){return s(),o("svg",ue,t[0]||(t[0]=[n("path",{fill:"currentColor",d:"M5 19V9h2v6.6L18.6 4L20 5.4L8.4 17H15v2z"},null,-1)]))}const de=f({name:"material-symbols-call-received",render:_e}),me={class:"nav"},pe={class:"icon","aria-hidden":"true"},ve={class:"title"},he={key:0,class:"count"},fe=["onClick"],ye={class:"icon","aria-hidden":"true"},ge={class:"title"},Ce={key:0,class:"count"},Se=D({__name:"CallsSidebar",setup(p){const t=E(),{counter:v}=P(U()),{parseQ:M}=X(),l=j({tagIds:[]}),c=h(""),i=h(""),r=h(new Map),{fetch:y}=F({handle:e=>{e&&(v.value.calls=e.total,r.value.set("1",e.incoming),r.value.set("2",e.outgoing),r.value.set("3",e.missed))},document:Y,variables:()=>({})});function g(e){return r.value.get(e)??-1}function C(){var _;const e=w.currentRoute.value,u=K(((_=e.query.q)==null?void 0:_.toString())??"");M(l,u),c.value=l.type??"",i.value=l.tagIds.length===1?l.tagIds[0]:"",c.value&&(i.value=""),y()}C(),G(()=>w.currentRoute.value,()=>{C()});function T(e){const u=te([{name:"type",op:"",value:e}]);x(t,`/calls?q=${se(u)}`)}function q(){x(t,"/calls")}const k=()=>{y()};return O(()=>{L.on("calls_deleted",k)}),W(()=>{L.off("calls_deleted",k)}),(e,u)=>{const _=ne,z=de,A=re,H=le,Q=N,R=I;return s(),d(R,null,{body:J(()=>[n("ul",me,[n("li",{class:B({active:!i.value&&!c.value}),onClick:b(q,["prevent"])},[n("span",pe,[$(_)]),n("span",ve,m(e.$t("all")),1),V(v).calls>=0?(s(),o("span",he,m(V(v).calls.toLocaleString()),1)):S("",!0)],2),(s(),o(ee,null,Z(["1","2","3"],a=>n("li",{key:a,class:B({active:a===c.value}),onClick:b(ke=>T(a),["prevent"])},[n("span",ye,[a==="1"?(s(),d(z,{key:0})):a==="2"?(s(),d(A,{key:1})):(s(),d(H,{key:2}))]),n("span",ge,m(e.$t(`call_type.${a}`)),1),g(a)>=0?(s(),o("span",Ce,m(g(a).toLocaleString()),1)):S("",!0)],10,fe)),64))]),$(Q,{type:"CALL",selected:i.value},null,8,["selected"])]),_:1})}}});export{Se as default};
