import{_ as H}from"./LeftSidebar.vuevuetypescriptsetuptruelang-_T0DTuhC.js";import{_ as I}from"./TagFilter.vuevuetypescriptsetuptruelang-wl26jVI1.js";import{m as w,c as a,o as t,a as s,d as N,e as A,s as D,f as E,M as P,r as v,N as j,w as F,O as m,v as G,P as y,Q as O,R as U,S as J,j as q,A as T,T as k,h as b,t as d,k as C,U as K,V as W,D as X,C as S,E as Y}from"./index-DUFKAMTy.js";import{_ as Z}from"./send-outline-rounded-BwtdYY9T.js";import{_ as ee}from"./layout-grid-UIN2xHFC.js";import"./VDropdownMenu-ChKpfMGq.js";const te={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function se(h,n){return t(),a("svg",te,n[0]||(n[0]=[s("path",{fill:"currentColor",d:"M6 22q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h7.175q.4 0 .763.15t.637.425l4.85 4.85q.275.275.425.638t.15.762V20q0 .825-.587 1.413T18 22zm7-14V4H6v16h12V9h-4q-.425 0-.712-.288T13 8M6 4v5zv16z"},null,-1)]))}const ne=w({name:"material-symbols-draft-outline-rounded",render:se}),oe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ae(h,n){return t(),a("svg",oe,n[0]||(n[0]=[s("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14v-3h-3q-.75.95-1.787 1.475T12 18t-2.212-.525T8 16H5zm7-3q.8 0 1.475-.413t1.1-1.087q.15-.225.375-.363t.5-.137H19V5H5v9h3.55q.275 0 .5.138t.375.362q.425.675 1.1 1.088T12 16m-7 3h14z"},null,-1)]))}const re=w({name:"material-symbols-inbox-outline-rounded",render:ae}),ie={class:"nav"},le={class:"icon","aria-hidden":"true"},ce={class:"title"},ue={key:0,class:"count"},_e=["onClick"],me={class:"icon","aria-hidden":"true"},de={class:"title"},pe={key:0,class:"count"},ke=N({__name:"MessagesSidebar",setup(h){const n=A(),{counter:p}=D(E()),{parseQ:$}=U(),r=P({tagIds:[]}),i=v(""),l=v(""),c=v(new Map),{fetch:V}=j({handle:e=>{e&&(p.value.messages=e.total,c.value.set("1",e.inbox),c.value.set("2",e.sent),c.value.set("3",e.drafts))},document:J,variables:()=>({})});function f(e){return c.value.get(e)??-1}function g(){var _;const e=y.currentRoute.value,u=O(((_=e.query.q)==null?void 0:_.toString())??"");$(r,u),i.value=r.type??"",l.value=r.tagIds.length===1?r.tagIds[0]:"",i.value&&(l.value=""),V()}g(),F(()=>y.currentRoute.value,()=>{g()});function B(e){const u=X([{name:"type",op:"",value:e}]);S(n,`/messages?q=${Y(u)}`)}function M(){S(n,"/messages")}return(e,u)=>{const _=ee,x=re,z=Z,L=ne,Q=I,R=H;return t(),m(R,null,{body:G(()=>[s("ul",ie,[s("li",{class:k({active:!l.value&&!i.value}),onClick:T(M,["prevent"])},[s("span",le,[q(_)]),s("span",ce,d(e.$t("all")),1),C(p).messages>=0?(t(),a("span",ue,d(C(p).messages.toLocaleString()),1)):b("",!0)],2),(t(),a(W,null,K(["1","2","3"],o=>s("li",{key:o,class:k({active:o===i.value}),onClick:T(ve=>B(o),["prevent"])},[s("span",me,[o==="1"?(t(),m(x,{key:0})):o==="2"?(t(),m(z,{key:1})):(t(),m(L,{key:2}))]),s("span",de,d(e.$t(`message_type.${o}`)),1),f(o)>=0?(t(),a("span",pe,d(f(o).toLocaleString()),1)):b("",!0)],10,_e)),64))]),q(Q,{type:"SMS",selected:l.value},null,8,["selected"])]),_:1})}}});export{ke as default};
