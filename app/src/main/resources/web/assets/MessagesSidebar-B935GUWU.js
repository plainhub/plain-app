import{_ as q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-CKp-4xkn.js";import{_ as L}from"./TagFilter.vuevuetypescriptsetuptruelang-BNkqgX8-.js";import{d as T,e as I,s as Q,f as R,W as A,r as _,Y as N,w as V,M as x,o as i,v as z,aa as g,a8 as D,a9 as E,ab as j,a as t,j as F,c as m,A as y,R as h,h as C,t as u,k as S,a1 as G,a0 as P,D as W,C as k,E as Y}from"./index-DZRXRZ01.js";import"./VDropdownMenu-Z4otLC_Y.js";import"./more-vert-0uLzmwy7.js";const H={class:"nav"},J={class:"title"},K={key:0,class:"count"},O=["onClick"],U={class:"title"},X={key:0,class:"count"},ce=T({__name:"MessagesSidebar",setup(Z){const d=I(),{counter:p}=Q(R()),{parseQ:b}=E(),a=A({tagIds:[]}),o=_(""),n=_(""),c=_(new Map),{fetch:B}=N({handle:e=>{e&&(p.value.messages=e.total,c.value.set("1",e.inbox),c.value.set("2",e.sent),c.value.set("3",e.drafts))},document:j,variables:()=>({})});function v(e){return c.value.get(e)??-1}function f(){var l;const e=g.currentRoute.value,r=D(((l=e.query.q)==null?void 0:l.toString())??"");b(a,r),o.value=a.type??"",n.value=a.tagIds.length===1?a.tagIds[0]:"",o.value&&(n.value=""),B()}f(),V(()=>g.currentRoute.value,()=>{f()});function $(e){const r=W([{name:"type",op:"",value:e}]);k(d,`/messages?q=${Y(r)}`)}function w(){k(d,"/messages")}return(e,r)=>{const l=L,M=q;return i(),x(M,null,{body:z(()=>[t("ul",H,[t("li",{class:h({active:!n.value&&!o.value}),onClick:y(w,["prevent"])},[t("span",J,u(e.$t("all")),1),S(p).messages>=0?(i(),m("span",K,u(S(p).messages.toLocaleString()),1)):C("",!0)],2),(i(),m(P,null,G(["1","2","3"],s=>t("li",{key:s,class:h({active:s===o.value}),onClick:y(ee=>$(s),["prevent"])},[t("span",U,u(e.$t(`message_type.${s}`)),1),v(s)>=0?(i(),m("span",X,u(v(s).toLocaleString()),1)):C("",!0)],10,O)),64))]),F(l,{type:"SMS",selected:n.value},null,8,["selected"])]),_:1})}}});export{ce as default};
