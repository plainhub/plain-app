import{_ as q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-nHLFbEAn.js";import{m as k,c as o,o as n,a as t,d as D,e as F,f as H,s as Q,r as U,W as d,da as W,d2 as G,d3 as K,N as O,O as a,v as J,d4 as X,A as m,T as v,j as I,db as Y,t as c,k as Z,a8 as ee,h as R,V as l,U as j,ba as te,C as M,L as ne}from"./index-DLxHt1vi.js";import{_ as se}from"./smartphone-2rf5PPgH.js";const oe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ie(u,i){return n(),o("svg",oe,i[0]||(i[0]=[t("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[t("rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}),t("path",{d:"M8 21h8m-4-4v4"})],-1)]))}const ae=k({name:"lucide-monitor",render:ie}),ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function re(u,i){return n(),o("svg",ce,i[0]||(i[0]=[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2zm2.054 10.987H3.946"},null,-1)]))}const le=k({name:"lucide-laptop",render:re}),de={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ue(u,i){return n(),o("svg",de,i[0]||(i[0]=[t("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[t("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),t("path",{d:"M12 18h.01"})],-1)]))}const _e=k({name:"lucide-tablet",render:ue}),pe={class:"nav"},he={class:"icon","aria-hidden":"true"},me={class:"title"},ve={key:0,class:"sidebar-loading"},ke={class:"section-title"},ye={class:"nav"},fe=["onClick"],ge={class:"icon","aria-hidden":"true"},Ce={class:"title"},be={class:"subtitle"},$e={class:"section-title"},we={class:"nav"},xe=["onClick"],Te={class:"icon","aria-hidden":"true"},Be={class:"title"},Se={class:"subtitle"},Ie=D({__name:"ChatSidebar",setup(u){const i=W(),y=F(),P=H(),{urlTokenKey:_}=Q(P),p=U([]),f=d(()=>{const e=i.currentRoute.value.query.id;return typeof e=="string"&&e!==""?e:""}),g=d(()=>{if(!f.value)return"local";if(!_.value)return"";try{const e=G.codec.base64.toBits(f.value),r=K(_.value,e);return r.startsWith("peer:")?r:"local"}catch{return"local"}}),C=d(()=>p.value.filter(e=>e.status==="paired")),b=d(()=>p.value.filter(e=>e.status!=="paired"));function $(e){return te(_.value,`peer:${e}`)}function w(e){return g.value===`peer:${e}`}const{fetch:V,loading:L}=O({handle:e=>{e!=null&&e.peers&&(p.value=e.peers)},document:X,variables:()=>({})});function h(e){if(e==="local"){M(y,"/chat");return}M(y,`/chat?id=${encodeURIComponent(e)}`)}return V(),(e,r)=>{const N=Y,z=ee,x=se,T=_e,B=le,S=ae,A=q;return n(),a(A,null,{body:J(()=>[t("ul",pe,[t("li",{class:v({active:g.value==="local"}),onClick:r[0]||(r[0]=m(s=>h("local"),["prevent"]))},[t("span",he,[I(N)]),t("span",me,c(e.$t("page_title.local_chat")),1)],2)]),Z(L)?(n(),o("div",ve,[I(z,{indeterminate:"",class:"sm"})])):(n(),o(l,{key:1},[C.value.length>0?(n(),o(l,{key:0},[t("div",ke,c(e.$t("paired_devices")),1),t("ul",ye,[(n(!0),o(l,null,j(C.value,s=>(n(),o("li",{key:s.id,class:v({active:w(s.id)}),onClick:m(E=>h($(s.id)),["prevent"])},[t("span",ge,[s.deviceType==="phone"?(n(),a(x,{key:0})):s.deviceType==="tablet"?(n(),a(T,{key:1})):s.deviceType==="pc"?(n(),a(B,{key:2})):(n(),a(S,{key:3}))]),t("span",Ce,c(s.name),1),t("span",be,c(s.ip),1)],10,fe))),128))])],64)):R("",!0),b.value.length>0?(n(),o(l,{key:1},[t("div",$e,c(e.$t("unpaired_devices")),1),t("ul",we,[(n(!0),o(l,null,j(b.value,s=>(n(),o("li",{key:s.id,class:v({active:w(s.id)}),onClick:m(E=>h($(s.id)),["prevent"])},[t("span",Te,[s.deviceType==="phone"?(n(),a(x,{key:0})):s.deviceType==="tablet"?(n(),a(T,{key:1})):s.deviceType==="pc"?(n(),a(B,{key:2})):(n(),a(S,{key:3}))]),t("span",Be,c(s.name),1),t("span",Se,c(s.ip),1)],10,xe))),128))])],64)):R("",!0)],64))]),_:1})}}}),Pe=ne(Ie,[["__scopeId","data-v-04646b85"]]);export{Pe as default};
