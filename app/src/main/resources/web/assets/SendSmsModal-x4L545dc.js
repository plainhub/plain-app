import{m as M,c as B,o as V,a as c,d as z,aH as E,aT as F,aJ as y,i as R,aU as H,r as L,a7 as N,aK as T,ai as U,aG as D,M as G,v as s,j as m,an as I,I as d,t as i,B as j,k as t,z as A,y as g,aL as J,L as K}from"./index-CiJYwD0I.js";const Q={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function O(_,a){return V(),B("svg",Q,a[0]||(a[0]=[c("path",{fill:"currentColor",d:"m6 18l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4zm4-5q.425 0 .713-.288T9 10t-.288-.712T8 9t-.712.288T7 10t.288.713T8 11m4 0q.425 0 .713-.288T13 10t-.288-.712T12 9t-.712.288T11 10t.288.713T12 11m4 0q.425 0 .713-.288T17 10t-.288-.712T16 9t-.712.288T15 10t.288.713T16 11"},null,-1)]))}const Z=M({name:"material-symbols-sms-outline-rounded",render:O}),P={class:"form-row"},W={class:"form-row"},X=z({__name:"SendSmsModal",props:{number:{type:String,default:""},body:{type:String,default:""}},setup(_){const a=_,{errors:n,defineField:b,handleSubmit:k}=E({validationSchema:F({number:y().trim().required(),body:y().trim().required()}),initialValues:{number:a.number,body:a.body}}),[r]=b("number"),[l]=b("body"),{mutate:S,loading:$,onDone:h}=R({document:H}),p=L(),f=()=>{T()},q=k(()=>{S({number:r.value,body:l.value})});return h(()=>{N.emit("sms_sent"),T()}),U(async()=>{await D(),requestAnimationFrame(()=>{setTimeout(()=>{var e;try{document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),(e=p.value)==null||e.focus()}catch(o){console.debug("Focus blocked:",o)}},100)})}),(e,o)=>{const v=A,w=I,x=j,C=J;return V(),G(C,{onClose:f},{headline:s(()=>[d(i(e.$t("send_sms")),1)]),content:s(()=>[c("div",P,[m(v,{ref_key:"numberRef",ref:p,modelValue:t(r),"onUpdate:modelValue":o[0]||(o[0]=u=>g(r)?r.value=u:null),type:"tel",label:e.$t("phone_number"),error:!!t(n).number,"error-text":t(n).number?e.$t(t(n).number):""},null,8,["modelValue","label","error","error-text"])]),c("div",W,[m(v,{modelValue:t(l),"onUpdate:modelValue":o[1]||(o[1]=u=>g(l)?l.value=u:null),type:"textarea",rows:4,label:e.$t("content"),error:!!t(n).body,"error-text":t(n).body?e.$t(t(n).body):""},null,8,["modelValue","label","error","error-text"])])]),actions:s(()=>[m(w,{value:"cancel",onClick:f},{default:s(()=>[d(i(e.$t("cancel")),1)]),_:1}),m(x,{value:"send",loading:t($),onClick:t(q)},{default:s(()=>[d(i(e.$t("send")),1)]),_:1},8,["loading","onClick"])]),_:1})}}}),ee=K(X,[["__scopeId","data-v-79f919e5"]]);export{ee as S,Z as _};
