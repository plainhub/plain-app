import{_ as Q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-DXZ1_5lW.js";import{_ as $}from"./TagFilter.vuevuetypescriptsetuptruelang-BQe4hXyG.js";import{_ as I}from"./trash-D5vSD9JV.js";import{_ as L}from"./layout-grid-C34BGwLt.js";import{d as M,e as R,s as z,f as E,M as V,r as f,N as D,w as O,az as P,ac as v,aA as j,O as x,o as l,v as G,P as g,Q as H,R as U,bS as F,a as t,j as u,A as y,T as S,c as T,h as k,t as r,k as i,D as J,C,E as K}from"./index-Bsb9VlRU.js";import"./VDropdownMenu-DdmjILN8.js";import"./more-vert-COB1t_KV.js";const W={class:"nav"},X={class:"icon","aria-hidden":"true"},Y={class:"title"},Z={key:0,class:"count"},ee={class:"icon","aria-hidden":"true"},te={class:"title"},se={key:0,class:"count"},_e=M({__name:"NotesSidebar",setup(ae){const _=R(),{counter:s}=z(E()),{parseQ:b}=U(),a=V({tagIds:[]}),o=f(!1),n=f(""),{fetch:d}=D({handle:e=>{e&&(s.value.notes=e.total,s.value.notesTrash=e.trash)},document:F,variables:()=>({})});function p(){var c;const e=g.currentRoute.value,h=H(((c=e.query.q)==null?void 0:c.toString())??"");b(a,h),n.value=a.tagIds.length===1?a.tagIds[0]:"",o.value=a.trash??!1,o.value&&(n.value=""),d()}p(),O(()=>g.currentRoute.value,()=>{p()});function w(){const e=J([{name:"trash",op:"",value:"true"}]);C(_,`/notes?q=${K(e)}`)}function B(){C(_,"/notes")}const m=()=>{d()};return P(()=>{v.on("notes_actioned",m)}),j(()=>{v.off("notes_actioned",m)}),(e,h)=>{const c=L,N=I,q=$,A=Q;return l(),x(A,null,{body:G(()=>[t("ul",W,[t("li",{class:S({active:!n.value&&!o.value}),onClick:y(B,["prevent"])},[t("span",X,[u(c)]),t("span",Y,r(e.$t("all")),1),i(s).notes>=0?(l(),T("span",Z,r(i(s).notes.toLocaleString()),1)):k("",!0)],2),t("li",{class:S({active:o.value}),onClick:y(w,["prevent"])},[t("span",ee,[u(N)]),t("span",te,r(e.$t("trash")),1),i(s).notesTrash>=0?(l(),T("span",se,r(i(s).notesTrash.toLocaleString()),1)):k("",!0)],2)]),u(q,{type:"NOTE",selected:n.value},null,8,["selected"])]),_:1})}}});export{_e as default};
