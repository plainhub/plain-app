import{m as B,c as M,o as g,a as c,d as z,aS as E,b1 as F,aU as y,i as R,ah as D,r as N,ad as U,aV as T,aA as A,an as H,O as I,v as s,j as m,aD as L,I as d,t as i,B as j,k as t,z as G,y as V,aW as O,L as Q}from"./index-9yvO6RpE.js";/* empty css                                                             */const W={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function J(_,a){return g(),M("svg",W,a[0]||(a[0]=[c("path",{fill:"currentColor",d:"m6 18l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4zm4-5q.425 0 .713-.288T9 10t-.288-.712T8 9t-.712.288T7 10t.288.713T8 11m4 0q.425 0 .713-.288T13 10t-.288-.712T12 9t-.712.288T11 10t.288.713T12 11m4 0q.425 0 .713-.288T17 10t-.288-.712T16 9t-.712.288T15 10t.288.713T16 11"},null,-1)]))}const ee=B({name:"material-symbols-sms-outline-rounded",render:J}),K={class:"form-row"},P={class:"form-row"},X=z({__name:"SendSmsModal",props:{number:{type:String,default:""},body:{type:String,default:""}},setup(_){const a=_,{errors:o,defineField:b,handleSubmit:S}=E({validationSchema:F({number:y().trim().required(),body:y().trim().required()}),initialValues:{number:a.number,body:a.body}}),[r]=b("number"),[l]=b("body"),{mutate:h,loading:k,onDone:$}=R({document:D}),p=N(),f=()=>{T()},q=S(()=>{h({number:r.value,body:l.value})});return $(()=>{U.emit("sms_sent"),T()}),A(async()=>{await H(),requestAnimationFrame(()=>{setTimeout(()=>{var e;try{document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),(e=p.value)==null||e.focus()}catch(n){console.debug("Focus blocked:",n)}},100)})}),(e,n)=>{const v=G,w=L,x=j,C=O;return g(),I(C,{onClose:f},{headline:s(()=>[d(i(e.$t("send_sms")),1)]),content:s(()=>[c("div",K,[m(v,{ref_key:"numberRef",ref:p,modelValue:t(r),"onUpdate:modelValue":n[0]||(n[0]=u=>V(r)?r.value=u:null),type:"tel",label:e.$t("phone_number"),error:!!t(o).number,"error-text":t(o).number?e.$t(t(o).number):""},null,8,["modelValue","label","error","error-text"])]),c("div",P,[m(v,{modelValue:t(l),"onUpdate:modelValue":n[1]||(n[1]=u=>V(l)?l.value=u:null),type:"textarea",rows:4,label:e.$t("content"),error:!!t(o).body,"error-text":t(o).body?e.$t(t(o).body):""},null,8,["modelValue","label","error","error-text"])])]),actions:s(()=>[m(w,{value:"cancel",onClick:f},{default:s(()=>[d(i(e.$t("cancel")),1)]),_:1}),m(x,{value:"send",loading:t(k),onClick:t(q)},{default:s(()=>[d(i(e.$t("send")),1)]),_:1},8,["loading","onClick"])]),_:1})}}}),te=Q(X,[["__scopeId","data-v-79f919e5"]]);export{te as S,ee as _};
