import{_ as te}from"./LeftSidebar.vuevuetypescriptsetuptruelang-rYBRxPjc.js";import{_ as se}from"./TagFilter.vuevuetypescriptsetuptruelang-DD5LtWg2.js";import{m as R,c as r,o as n,a as o,d as Q,u as ae,e as U,r as T,aD as B,b7 as ne,g as oe,bm as le,G as ie,ai as j,a7 as S,aj as N,O as V,I as re,t as h,P as z,M as q,H as P,A,v as x,bn as ce,au as ue,a0 as F,a1 as de,R as O,k as $,f as L,s as _e,W as pe,X as i,Y as me,w as ve,aa as G,a8 as he,a9 as fe,j as k,h as M,aY as ye,aZ as ge,D as ke,C as H,E as Te}from"./index-CiJYwD0I.js";import{_ as qe}from"./layout-grid-tDNcXM3n.js";const $e={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function be(c,e){return n(),r("svg",$e,e[0]||(e[0]=[o("path",{fill:"currentColor",d:"m12 10.775l-3.9 3.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.6-4.6q.15-.15.325-.213T12 8.4t.375.063t.325.212l4.6 4.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"},null,-1)]))}const Ie=R({name:"material-symbols-expand-less-rounded",render:be}),Ce={class:"section-title"},we={class:"nav"},Be=["onClick"],Se={class:"title"},Ae={class:"count"},De=Q({__name:"BucketFilter",props:{type:{type:String,required:!0},selected:{type:String,required:!0}},setup(c){const e=c,{t:b}=ae(),s=U(),I=T([]),f=B(()=>{var a;return!!((a=s.bucketFilterCollapsed)!=null&&a[e.type])});function v(){s.bucketFilterCollapsed[e.type]=!f.value}const g=B(()=>[...I.value??[]].sort((a,_)=>(a.name??"").localeCompare(_.name??"",void 0,{numeric:!0,sensitivity:"base"}))),{view:y}=ne(e.type),{refetch:u}=oe({handle:(a,_)=>{_?ie(b(_),"error"):a&&(I.value=a.mediaBuckets)},document:le,variables:{type:e.type}}),d=a=>{a.type===e.type&&u()};return j(()=>{S.on("media_items_actioned",d)}),N(()=>{S.off("media_items_actioned",d)}),(a,_)=>{const C=ce,w=Ie,D=P,E=z("tooltip");return n(),r(F,null,[o("div",Ce,[re(h(a.$t("folders"))+" ",1),V((n(),q(D,{onClick:A(v,["prevent"])},{default:x(()=>[f.value?(n(),q(C,{key:0})):(n(),q(w,{key:1}))]),_:1})),[[E,f.value?a.$t("expand_all"):a.$t("collapse_all")]])]),V(o("ul",we,[(n(!0),r(F,null,de(g.value,p=>(n(),r("li",{key:p.id,class:O({active:c.selected&&p.id===c.selected}),onClick:A(t=>$(y)($(s),p.id),["prevent"])},[o("span",Se,h(p.name),1),o("span",Ae,h(p.itemCount.toLocaleString()),1)],10,Be))),128))],512),[[ue,!f.value]])],64)}}}),Ee={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Me(c,e){return n(),r("svg",Ee,e[0]||(e[0]=[o("path",{fill:"currentColor",d:"M11.95 18q.525 0 .888-.363t.362-.887t-.362-.888t-.888-.362t-.887.363t-.363.887t.363.888t.887.362m.05 4q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m.1-12.3q.625 0 1.088.4t.462 1q0 .55-.337.975t-.763.8q-.575.5-1.012 1.1t-.438 1.35q0 .35.263.588t.612.237q.375 0 .638-.25t.337-.625q.1-.525.45-.937t.75-.788q.575-.55.988-1.2t.412-1.45q0-1.275-1.037-2.087T12.1 6q-.95 0-1.812.4T8.975 7.625q-.175.3-.112.638t.337.512q.35.2.725.125t.625-.425q.275-.375.688-.575t.862-.2"},null,-1)]))}const Ve=R({name:"material-symbols-help-outline-rounded",render:Me}),xe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Oe(c,e){return n(),r("svg",xe,e[0]||(e[0]=[o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},null,-1)]))}const Re=R({name:"lucide-trash",render:Oe}),Fe={class:"nav"},Le={class:"icon","aria-hidden":"true"},Ge={class:"title"},He={key:0,class:"count"},Qe={class:"icon","aria-hidden":"true"},Ue={class:"title"},je={key:0,class:"count"},We=Q({__name:"MediaSidebar",props:{type:{type:String,required:!0},gql:{type:Object,required:!0}},setup(c){L();const e=c,b=U(),{counter:s,app:I}=_e(L()),{parseQ:f}=fe(),v=pe({tagIds:[]}),g=T(""),y=T(!1),u=T(""),d=T(""),a=B(()=>{var t,m,l;return e.type===i.IMAGE?((t=s.value)==null?void 0:t.images)??-1:e.type===i.VIDEO?((m=s.value)==null?void 0:m.videos)??-1:e.type===i.AUDIO?((l=s.value)==null?void 0:l.audios)??-1:-1}),_=B(()=>{var t,m,l;return e.type===i.IMAGE?((t=s.value)==null?void 0:t.imagesTrash)??-1:e.type===i.VIDEO?((m=s.value)==null?void 0:m.videosTrash)??-1:e.type===i.AUDIO?((l=s.value)==null?void 0:l.audiosTrash)??-1:-1}),{fetch:C}=me({handle:t=>{t&&(e.type===i.IMAGE?(s.value.images=t.total,s.value.imagesTrash=t.trash):e.type===i.VIDEO?(s.value.videos=t.total,s.value.videosTrash=t.trash):e.type===i.AUDIO&&(s.value.audios=t.total,s.value.audiosTrash=t.trash))},document:e.gql,variables:()=>({})});function w(){var l;const t=G.currentRoute.value;g.value=t.meta.group||"",C();const m=he(((l=t.query.q)==null?void 0:l.toString())??"");f(v,m),u.value=v.tagIds.length===1?v.tagIds[0]:"",y.value=v.trash??!1,d.value=v.bucketId??"",u.value&&d.value&&(u.value=""),y.value&&(d.value="",u.value="")}w(),ve(()=>G.currentRoute.value.fullPath,()=>{w()});function D(){const t=ke([{name:"trash",op:"",value:"true"}]);H(b,`/${g.value}?q=${Te(t)}`)}function E(){H(b,`/${g.value}`)}const p=t=>{t.type===e.type&&C()};return j(()=>{S.on("media_items_actioned",p)}),N(()=>{S.off("media_items_actioned",p)}),(t,m)=>{const l=qe,Y=Re,W=Ve,X=P,Z=De,J=se,K=te,ee=z("tooltip");return n(),q(K,null,{body:x(()=>[o("ul",Fe,[o("li",{class:O({active:!u.value&&!d.value&&!y.value}),onClick:A(E,["prevent"])},[o("span",Le,[k(l)]),o("span",Ge,h(t.$t("all")),1),a.value>=0?(n(),r("span",He,h(a.value.toLocaleString()),1)):M("",!0)],2),$(ye)($(ge).MEDIA_TRASH,$(I).osVersion)?(n(),r("li",{key:0,class:O({active:y.value}),onClick:A(D,["prevent"])},[o("span",Qe,[k(Y)]),o("span",Ue,h(t.$t("trash")),1),V((n(),q(X,{class:"btn-help sm"},{default:x(()=>[k(W)]),_:1})),[[ee,t.$t("trash_tips")]]),_.value>=0?(n(),r("span",je,h(_.value.toLocaleString()),1)):M("",!0)],2)):M("",!0)]),k(Z,{type:e.type,selected:d.value},null,8,["type","selected"]),k(J,{type:e.type,selected:u.value},null,8,["type","selected"])]),_:1})}}});export{We as _};
